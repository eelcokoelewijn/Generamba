import Foundation
import UIKit
protocol {{ custom_parameters.name }}FlowController {
    func start()
}

protocol {{ custom_parameters.name }}PresenterDelegate: class {
  func dismiss(presenter: {{ custom_parameters.name }}Presenter)
}

protocol {{ custom_parameters.name }}FlowControllerDelegate: class {

}

final class {{ custom_parameters.name }}FlowControllerImplementation: MainFlowController,
                                                            {{ custom_parameters.name }}FlowController {
    var mainFlowController: UIViewController {
        return navigationController
    }
    var childFlowController: [FlowController] = []
    
    private lazy var navigationController: UINavigationController = {
        let nc = UINavigationController()
        nc.navigationBar.isTranslucent = false
        return nc
    }()

    init(window: UIWindow?) {
        window?.rootViewController = mainFlowController
        window?.makeKeyAndVisible()
    }

    func start() {
        let presenter = Mixin{{ custom_parameters.name }}Presenter()
        presenter.delegate = self
        navigationController.viewControllers = [{{ custom_parameters.name }}ViewController(presenter: presenter)]
    }
}

extension {{ custom_parameters.name }}FlowControllerImplementation: {{ custom_parameters.name }}PresenterDelegate {
  func dismiss(presenter: {{ custom_parameters.name }}Presenter) {
      // delegate?.dismiss(flowController: self)
  }
}

extension {{ custom_parameters.name }}FlowControllerImplementation: {{ custom_parameters.name }}FlowControllerDelegate {
}
